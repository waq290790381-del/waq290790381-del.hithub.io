<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ è±†åŒ…Â·çµæ„Ÿç”»ç¬” (åŒè¯­ç‰ˆ)</title>
    <style>
        :root { --primary: #0066ff; --bg: #f2f5fa; --card: #ffffff; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 20px;
            color: #333;
            margin: 0;
        }
        .container {
            background: var(--card);
            width: 100%;
            max-width: 700px;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 102, 255, 0.1);
        }
        h1 { text-align: center; color: var(--primary); margin-top: 0; }
        
        /* é…ç½®åŒº (é»˜è®¤æŠ˜å ) */
        details { margin-bottom: 20px; font-size: 13px; color: #666; }
        input { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 6px; margin-bottom: 5px; box-sizing: border-box; }

        /* é€‰é¡¹ç½‘æ ¼ */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* ä¸¤åˆ— */
            gap: 15px;
            margin-bottom: 15px;
        }
        .option-group label { display: block; font-weight: bold; margin-bottom: 8px; color: #555; font-size: 14px; }
        select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; outline: none; background: #fff; }
        
        /* è¯­è¨€åˆ‡æ¢ç‰¹åˆ«æ ·å¼ */
        #lang { border-color: #0066ff; color: #0066ff; font-weight: bold; }

        /* è¾“å…¥åŒº */
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 5px; }
        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 15px;
        }
        textarea { height: 80px; resize: vertical; }

        /* æŒ‰é’® */
        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #0066ff, #00ccff);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(0, 102, 255, 0.3);
        }
        button:hover { transform: translateY(-2px); }
        button:disabled { background: #ccc; cursor: wait; box-shadow: none; }

        /* ç»“æœåŒº */
        #resultArea {
            margin-top: 25px;
            padding: 20px;
            background: #282c34;
            color: #abb2bf; 
            border-radius: 10px;
            font-family: 'Consolas', monospace;
            white-space: pre-wrap;
            line-height: 1.6;
            min-height: 100px;
            position: relative;
            font-size: 14px;
        }
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 4px 10px;
            font-size: 12px;
            border-radius: 4px;
            width: auto;
            box-shadow: none;
        }
        .copy-btn:hover { background: rgba(255,255,255,0.2); }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ¨ è±†åŒ…Â·çµæ„Ÿç”»ç¬” V2</h1>
    
    <details>
        <summary>âš™ï¸ API è®¾ç½® (ç‚¹æ­¤ä¿®æ”¹ Key)</summary>
        <input id="apiKey" type="password" value="4791ca71-899b-4d8f-aae8-297244d88596" placeholder="API Key">
        <input id="modelId" type="text" value="doubao-seed-1-6-251015" placeholder="Model ID">
    </details>

    <div class="options-grid">
        <div class="option-group">
            <label>ğŸŒ è¾“å‡ºè¯­è¨€ (å…³é”®ï¼)</label>
            <select id="lang">
                <option value="zh">ä¸­æ–‡ (é€‚åˆå³æ¢¦/æ··å…ƒ)</option>
                <option value="en">English (é€‚åˆFlux/MJ/Banana)</option>
            </select>
        </div>
        <div class="option-group">
            <label>ğŸ“¸ å«å›¾æ¨¡å¼</label>
            <select id="refMode">
                <option value="yes">æœ‰åŸå›¾ (ä¿è„¸/ä¿ç‰¹å¾)</option>
                <option value="no">æ— åŸå›¾ (è‡ªç”±å‘æŒ¥)</option>
            </select>
        </div>
        <div class="option-group">
            <label>ğŸ‘¶ ä¸»è§’è®¾å®š</label>
            <select id="subject">
                <option value="coco">Coco (å®å®)</option>
                <option value="girl">ç¾å°‘å¥³</option>
                <option value="boy">å¸…å“¥</option>
                <option value="cat">èŒå® </option>
            </select>
        </div>
        <div class="option-group">
            <label>ğŸ¨ ç”»é¢é£æ ¼</label>
            <select id="style">
                <option value="real">çœŸå®å†™çœŸ (Photorealistic)</option>
                <option value="pixar">çš®å…‹æ–¯ 3D (Pixar Style)</option>
                <option value="illustration">æ²»æ„ˆæ’ç”» (Illustration)</option>
                <option value="cyberpunk">èµ›åšæœ‹å…‹ (Cyberpunk)</option>
            </select>
        </div>
    </div>

    <div class="input-group">
        <label>âœ¨ ç”»é¢ä¸»é¢˜ (å¿…å¡«)</label>
        <input type="text" id="theme" placeholder="ä¾‹å¦‚ï¼šåœ¨é›ªåœ°é‡Œå †é›ªäººã€æŠ±ç€å¤§è¥¿ç“œ...">
    </div>

    <div class="input-group">
        <label>ğŸ“ é¢å¤–ç»†èŠ‚ (é€‰å¡«)</label>
        <textarea id="requirements" placeholder="ä¾‹å¦‚ï¼šå…‰çº¿è¦æ¸©æš–ã€èƒŒæ™¯è¦è™šåŒ–ã€ç©¿ç€çº¢è‰²æ¯›è¡£..."></textarea>
    </div>

    <button onclick="generatePrompt()" id="genBtn">ğŸª„ ç”Ÿæˆå’’è¯­</button>

    <div id="resultArea">
        <button class="copy-btn" onclick="copyText()">å¤åˆ¶</button>
        <span id="output">ç­‰å¾…ç”Ÿæˆ...</span>
    </div>
</div>

<script>
    async function generatePrompt() {
        const apiKey = document.getElementById('apiKey').value.trim();
        const modelId = document.getElementById('modelId').value.trim();
        
        // è·å–æ‰€æœ‰é€‰é¡¹
        const lang = document.getElementById('lang').value;
        const refMode = document.getElementById('refMode').value;
        const subject = document.getElementById('subject').value;
        const style = document.getElementById('style').value;
        const theme = document.getElementById('theme').value.trim();
        const requirements = document.getElementById('requirements').value.trim();
        
        const btn = document.getElementById('genBtn');
        const output = document.getElementById('output');

        if (!theme) { alert("å®ï¼å†™ä¸ªä¸»é¢˜å‘€ï¼"); return; }

        btn.disabled = true;
        btn.innerText = "è±†åŒ…æ­£åœ¨æ€è€ƒ...ğŸ§ ";
        output.innerText = "æ­£åœ¨è¯·æ±‚ç«å±±å¼•æ“...";

        // --- æ ¸å¿ƒï¼šæ ¹æ®è¯­è¨€æ„å»ºä¸åŒçš„ System Prompt ---
        let systemPrompt = "";
        
        if (lang === 'en') {
            // è‹±æ–‡æ¨¡å¼ï¼šé€‚åˆ Flux/MJ
            systemPrompt = `You are an expert AI Art Prompt Generator. 
Your task is to write a detailed, high-quality text-to-image prompt based on the user's request.
**Output Requirement:**
- Output ONLY the prompt in **English**.
- Use descriptive keywords and phrases (e.g., "cinematic lighting, 8k, highly detailed").
- Do not include conversational filler like "Here is your prompt".
- Format: [Subject Description], [Environment], [Action], [Style/Lighting/Camera].`;
        } else {
            // ä¸­æ–‡æ¨¡å¼ï¼šé€‚åˆå³æ¢¦
            systemPrompt = `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIç»˜ç”»æç¤ºè¯ä¸“å®¶ã€‚è¯·æ ¹æ®ç”¨æˆ·éœ€æ±‚ç¼–å†™ä¸€æ®µé«˜è´¨é‡çš„æç¤ºè¯ã€‚
**è¾“å‡ºè¦æ±‚ï¼š**
- ä½¿ç”¨**ä¸­æ–‡**è¾“å‡ºï¼ˆå› ä¸ºå³æ¢¦å¯¹ä¸­æ–‡ç†è§£æ›´å¥½ï¼Œä¸”æ›´èŠ‚çœå­—æ•°ï¼‰ã€‚
- æå†™è¦ç»†è…»ï¼Œç”»é¢æ„Ÿå¼ºï¼Œçªå‡ºå…‰å½±å’Œæ°›å›´ã€‚
- ç›´æ¥è¾“å‡ºæç¤ºè¯æ®µè½ï¼Œä¸è¦åºŸè¯ã€‚`;
        }

        // --- æ„å»ºçº¦æŸæ¡ä»¶ ---
        let constraints = `
**Parameters:**
1. **Style:** ${getStyleDesc(style, lang)}
2. **Subject:** ${getSubjectDesc(subject, lang)}
`;

        if (refMode === 'yes') {
            if (lang === 'en') {
                constraints += `3. **Reference Image Constraint:** Strictly keep the original face/identity unchanged. Ensure consistency with the reference image.`;
            } else {
                constraints += `3. **å«å›¾çº¦æŸï¼ˆé‡è¦ï¼‰ï¼š** ç”¨æˆ·ä¸Šä¼ äº†åŸå›¾ã€‚è¯·åœ¨æç¤ºè¯å¼€å¤´å¼ºè°ƒï¼šâ€œä¸¥æ ¼ä¿æŒäººç‰©é¢éƒ¨ç‰¹å¾ä¸å˜ï¼Œä¿æŒåŸå›¾äººç‰©ä¸€è‡´æ€§â€ã€‚`;
            }
        }

        const userContent = `**Theme:** ${theme}\n**Details:** ${requirements || "None"}\n\n${constraints}`;

        try {
            const response = await fetch('https://ark.cn-beijing.volces.com/api/v3/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: modelId,
                    messages: [
                        { role: "system", content: systemPrompt },
                        { role: "user", content: userContent }
                    ],
                    temperature: 0.7,
                    stream: false
                })
            });

            const data = await response.json();

            if (data.error) {
                throw new Error(data.error.message);
            }

            output.innerText = data.choices[0].message.content;

        } catch (err) {
            output.innerText = "ğŸ˜­ å‡ºé”™äº†ï¼š\n" + err.message;
        } finally {
            btn.disabled = false;
            btn.innerText = "ğŸª„ ç”Ÿæˆå’’è¯­";
        }
    }

    function copyText() {
        const text = document.getElementById('output').innerText;
        navigator.clipboard.writeText(text).then(() => alert("å¤åˆ¶æˆåŠŸï¼"));
    }

    // --- è¾…åŠ©å‡½æ•°ï¼šåŒè¯­æè¿° ---
    function getSubjectDesc(val, lang) {
        if (lang === 'en') {
            if (val === 'coco') return "A cute 2-year-old East Asian girl, round face, big eyes, short hair, adorable expression.";
            if (val === 'girl') return "A beautiful young girl, close-up, natural skin texture, bright eyes.";
            if (val === 'boy') return "A handsome young man, sharp features, deep eyes.";
            if (val === 'cat') return "A fluffy cute cat/dog, innocent eyes, realistic fur.";
            return "A character";
        } else {
            if (val === 'coco') return "1å²10ä¸ªæœˆçš„ä¸œäºšå°å¥³å­©ï¼Œçš®è‚¤ç™½çš™ï¼Œè¡¨æƒ…è¶…çº§èŒã€‚";
            if (val === 'girl') return "ä¸€ä½é’æ˜¥æ´»æ³¼çš„å¯çˆ±å°‘å¥³ï¼Œé¢éƒ¨ç‰¹å†™ï¼Œçš®è‚¤è´¨æ„ŸçœŸå®ç»†è…»ã€‚";
            if (val === 'boy') return "ä¸€ä½è‹±ä¿Šçš„å¹´è½»ç”·å­ï¼Œäº”å®˜ç«‹ä½“ã€‚";
            if (val === 'cat') return "ä¸€åªæ¯›èŒ¸èŒ¸çš„å¯çˆ±å® ç‰©ï¼Œæ¯›å‘çœŸå®ã€‚";
            return "äººç‰©";
        }
    }

    function getStyleDesc(val, lang) {
        if (lang === 'en') {
            if (val === 'real') return "Photorealistic, 8k, raw photo, natural lighting, film grain.";
            if (val === 'pixar') return "Pixar style 3D render, C4D, blind box texture, cute, soft lighting.";
            if (val === 'clay') return "Claymation style, stop motion, rounded edges, vibrant colors.";
            if (val === 'cyberpunk') return "Cyberpunk style, neon lights, high contrast, futuristic.";
            return "High quality";
        } else {
            if (val === 'real') return "çœŸå®å†™çœŸé£æ ¼ï¼Œé«˜æ¸…ï¼Œè‡ªç„¶å…‰ï¼Œèƒ¶ç‰‡æ„Ÿï¼Œä¿ç•™çš®è‚¤çº¹ç†ã€‚";
            if (val === 'pixar') return "çš®å…‹æ–¯3DåŠ¨ç”»é£æ ¼ï¼ŒC4Dæ¸²æŸ“ï¼Œç›²ç›’è´¨æ„Ÿï¼Œå…‰å½±æŸ”å’Œã€‚";
            if (val === 'clay') return "ç²˜åœŸé£ï¼Œå®šæ ¼åŠ¨ç”»è´¨æ„Ÿï¼Œè¾¹ç¼˜åœ†æ¶¦ã€‚";
            if (val === 'cyberpunk') return "èµ›åšæœ‹å…‹é£æ ¼ï¼Œéœ“è™¹ç¯æ•ˆï¼Œæœªæ¥æ„Ÿã€‚";
            return "é«˜æ¸…é£æ ¼";
        }
    }
</script>

</body>
</html>