<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>âœ¨ çµæ„Ÿç”»ç¬” | å¦ˆå¦ˆçš„ä¸“å±ç”»å›¾åŠ©æ‰‹</title>
    <style>
        :root {
            /* æ¸©é¦¨é…è‰²ï¼šæš–æè‰²èƒŒæ™¯ + æŸ”å’Œè“ä¸»è‰² */
            --primary: #4a90e2;
            --primary-gradient: linear-gradient(135deg, #4a90e2, #8bc6ec);
            --bg: #fdfbf7; 
            --card: #ffffff;
            --text-main: #333333;
            --text-sub: #666666;
            --shadow: 0 10px 30px rgba(74, 144, 226, 0.1);
            --radius: 20px;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Microsoft YaHei", sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            color: var(--text-main);
            display: flex;
            justify-content: center;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .container {
            background: var(--card);
            width: 100%;
            max-width: 600px; /* æ‰‹æœºå¹³æ¿é€‚é… */
            padding: 25px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        /* é¡¶éƒ¨è£…é¥° */
        .header {
            text-align: center;
            margin-bottom: 25px;
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
            color: var(--primary);
            font-weight: 800;
            letter-spacing: 1px;
        }
        .header p {
            margin: 5px 0 0;
            font-size: 14px;
            color: #999;
        }

        /* å¯†ç åŒº - æ”¾åœ¨æœ€æ˜¾çœ¼åˆä¸ç¢äº‹çš„åœ°æ–¹ */
        .auth-box {
            background: #f0f7ff;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px dashed #bdddfd;
        }
        .auth-box label {
            font-size: 13px;
            color: var(--primary);
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }
        .auth-box input {
            border: 1px solid #fff;
            background: #fff;
        }

        /* é€šç”¨è¾“å…¥æ ·å¼ */
        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-main);
            font-size: 15px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #eee;
            border-radius: 12px;
            background: #f9f9f9;
            font-size: 16px; /* é˜²æ­¢iOSç¼©æ”¾ */
            outline: none;
            transition: all 0.3s;
            box-sizing: border-box;
            -webkit-appearance: none; /* å»é™¤iOSé»˜è®¤æ ·å¼ */
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            background: #fff;
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
        }

        /* é€‰é¡¹ç½‘æ ¼ */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        /* é‡ç‚¹åŒºåŸŸ */
        .highlight-section {
            background: #fff8f0;
            padding: 15px;
            border-radius: 15px;
            border: 1px solid #ffecd6;
            margin-bottom: 20px;
        }

        textarea {
            height: 100px;
            resize: none;
            line-height: 1.5;
        }

        /* å¤§æŒ‰é’® */
        button#genBtn {
            width: 100%;
            padding: 16px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(74, 144, 226, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        button#genBtn:active {
            transform: scale(0.98);
            box-shadow: 0 4px 10px rgba(74, 144, 226, 0.3);
        }
        button#genBtn:disabled {
            background: #ccc;
            box-shadow: none;
            cursor: not-allowed;
        }

        /* ç»“æœå±•ç¤ºåŒº */
        #resultArea {
            margin-top: 25px;
            padding: 20px;
            background: #333;
            color: #fff;
            border-radius: 16px;
            font-family: monospace;
            line-height: 1.6;
            position: relative;
            min-height: 120px;
            font-size: 14px;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 5px 12px;
            font-size: 12px;
            border-radius: 20px;
            cursor: pointer;
        }
        
        /* åº•éƒ¨ç‰ˆæƒ */
        .footer {
            text-align: center;
            margin-top: 30px;
            font-size: 12px;
            color: #ccc;
        }

    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>ğŸ¨ çµæ„Ÿç”»ç¬” V2</h1>
        <p>è¾“å…¥æƒ³æ³•ï¼Œè‡ªåŠ¨å¸®ä½ å†™å‡ºæ¼‚äº®çš„ç”»ç”»å’’è¯­</p>
    </div>

    <!-- å¯†ç è¾“å…¥åŒº -->
    <div class="auth-box">
        <label>ğŸ”‘ è®¿é—®å¯†ç  (Token)</label>
        <input id="password" type="password" placeholder="è¯·è¾“å…¥å¯†ç ..." value="">
    </div>

    <div class="options-grid">
        <div>
            <label>ğŸŒ è¯­è¨€æ¨¡å¼</label>
            <select id="lang">
                <option value="zh">ä¸­æ–‡ (é€‚åˆå³æ¢¦/æ··å…ƒ)</option>
                <option value="en">è‹±æ–‡ (é€‚åˆMJ/Flux)</option>
            </select>
        </div>
        <div>
            <label>ğŸ“¸ æ˜¯å¦æœ‰åŸå›¾</label>
            <select id="refMode">
                <option value="no">æ— åŸå›¾ (è‡ªç”±å‘æŒ¥)</option>
                <option value="yes">æœ‰åŸå›¾ (ä¿æŒäººè„¸)</option>
            </select>
        </div>
        <div>
            <label>ğŸ‘¶ ä¸»è§’æ˜¯è°</label>
            <select id="subject">
                <option value="coco">Coco (å®å®)</option>
                <option value="girl">æ¼‚äº®å°å§å§</option>
                <option value="boy">å¸…æ°”å°å“¥å“¥</option>
                <option value="cat">å¯çˆ±èŒå® </option>
            </select>
        </div>
        <div>
            <label>ğŸ¨ ç”»é¢é£æ ¼</label>
            <select id="style">
                <option value="real">çœŸå®ç…§ç‰‡ (åƒæ‹å‡ºæ¥çš„)</option>
                <option value="pixar">çš®å…‹æ–¯åŠ¨ç”» (3Då¯çˆ±)</option>
                <option value="illustration">æ²»æ„ˆæ’ç”» (æ‰‹ç»˜æ„Ÿ)</option>
                <option value="cyberpunk">æœªæ¥ç§‘æŠ€ (ç‚«é…·)</option>
            </select>
        </div>
    </div>

    <div class="highlight-section">
        <label>âœ¨ æƒ³ç”»ä»€ä¹ˆï¼Ÿ(å¿…å¡«)</label>
        <input type="text" id="theme" placeholder="ä¾‹å¦‚ï¼šåœ¨æµ·è¾¹ç©æ²™å­ã€ç©¿ç€å…¬ä¸»è£™...">
    </div>

    <div style="margin-bottom: 20px;">
        <label>ğŸ“ è¡¥å……ç»†èŠ‚ (é€‰å¡«)</label>
        <textarea id="requirements" placeholder="ä¾‹å¦‚ï¼šé˜³å…‰è¦å¥½ã€èƒŒæ™¯è¦è™šåŒ–ã€ç¬‘å¾—å¾ˆå¼€å¿ƒ..."></textarea>
    </div>

    <button onclick="generatePrompt()" id="genBtn">ğŸª„ å¼€å§‹ç”Ÿæˆå’’è¯­</button>

    <div id="resultArea">
        <button class="copy-btn" onclick="copyText()">å¤åˆ¶å…¨éƒ¨</button>
        <span id="output">è¿™é‡Œä¼šæ˜¾ç¤ºç”Ÿæˆçš„å’’è¯­...</span>
    </div>

    <div class="footer">
        Powered by Saki0723 API
    </div>
</div>

<script>
    // é…ç½®å¸¸é‡ï¼šè¿™é‡Œå¡«ä½ çš„æ¨¡å‹IDï¼Œä¸ç”¨è®©ç”¨æˆ·çœ‹è§
    const MODEL_ID = "doubao-seed-1-6-251015"; 
    const API_URL = "https://api.saki0723.fun";

    async function generatePrompt() {
        // 1. è·å–å¯†ç 
        const token = document.getElementById('password').value.trim();
        if (!token) {
            alert("âš ï¸ è¿˜æ²¡å¡«å¯†ç å‘¢ï¼è¯·åœ¨æœ€ä¸Šé¢çš„æ¡†é‡Œå¡«å…¥å¯†ç ã€‚");
            return;
        }

        // 2. è·å–ç”¨æˆ·è¾“å…¥
        const lang = document.getElementById('lang').value;
        const refMode = document.getElementById('refMode').value;
        const subject = document.getElementById('subject').value;
        const style = document.getElementById('style').value;
        const theme = document.getElementById('theme').value.trim();
        const requirements = document.getElementById('requirements').value.trim();
        
        const btn = document.getElementById('genBtn');
        const output = document.getElementById('output');

        if (!theme) { 
            alert("å®ï¼å†™ä¸ªä¸»é¢˜å‘€ï¼Œä¸ç„¶ä¸çŸ¥é“ç”»ä»€ä¹ˆ~"); 
            return; 
        }

        // 3. ç•Œé¢çŠ¶æ€æ›´æ–°
        btn.disabled = true;
        btn.innerHTML = "ğŸ§  è±†åŒ…æ­£åœ¨æ€è€ƒä¸­...";
        output.innerText = "æ­£åœ¨å‘¼å« AI å¤§è„‘ï¼Œè¯·ç¨ç­‰...";

        // 4. æ„å»º System Prompt (ä¿æŒåŸæœ‰é€»è¾‘)
        let systemPrompt = "";
        if (lang === 'en') {
            systemPrompt = `You are an expert AI Art Prompt Generator. 
Your task is to write a detailed, high-quality text-to-image prompt based on the user's request.
**Output Requirement:**
- Output ONLY the prompt in **English**.
- Use descriptive keywords and phrases (e.g., "cinematic lighting, 8k, highly detailed").
- Do not include conversational filler like "Here is your prompt".
- Format: [Subject Description], [Environment], [Action], [Style/Lighting/Camera].`;
        } else {
            systemPrompt = `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIç»˜ç”»æç¤ºè¯ä¸“å®¶ã€‚è¯·æ ¹æ®ç”¨æˆ·éœ€æ±‚ç¼–å†™ä¸€æ®µé«˜è´¨é‡çš„æç¤ºè¯ã€‚
**è¾“å‡ºè¦æ±‚ï¼š**
- ä½¿ç”¨**ä¸­æ–‡**è¾“å‡ºï¼ˆå› ä¸ºå³æ¢¦å¯¹ä¸­æ–‡ç†è§£æ›´å¥½ï¼Œä¸”æ›´èŠ‚çœå­—æ•°ï¼‰ã€‚
- æå†™è¦ç»†è…»ï¼Œç”»é¢æ„Ÿå¼ºï¼Œçªå‡ºå…‰å½±å’Œæ°›å›´ã€‚
- ç›´æ¥è¾“å‡ºæç¤ºè¯æ®µè½ï¼Œä¸è¦åºŸè¯ã€‚`;
        }

        // 5. æ„å»ºçº¦æŸæ¡ä»¶ (ä¿æŒåŸæœ‰é€»è¾‘)
        let constraints = `
**Parameters:**
1. **Style:** ${getStyleDesc(style, lang)}
2. **Subject:** ${getSubjectDesc(subject, lang)}
`;
        if (refMode === 'yes') {
            if (lang === 'en') {
                constraints += `3. **Reference Image Constraint:** Strictly keep the original face/identity unchanged. Ensure consistency with the reference image.`;
            } else {
                constraints += `3. **å«å›¾çº¦æŸï¼ˆé‡è¦ï¼‰ï¼š** ç”¨æˆ·ä¸Šä¼ äº†åŸå›¾ã€‚è¯·åœ¨æç¤ºè¯å¼€å¤´å¼ºè°ƒï¼šâ€œä¸¥æ ¼ä¿æŒäººç‰©é¢éƒ¨ç‰¹å¾ä¸å˜ï¼Œä¿æŒåŸå›¾äººç‰©ä¸€è‡´æ€§â€ã€‚`;
            }
        }

        const userContent = `**Theme:** ${theme}\n**Details:** ${requirements || "None"}\n\n${constraints}`;

        // 6. å‘èµ·è¯·æ±‚ (æ”¹ä¸ºè°ƒç”¨ä½ çš„ä»£ç† API)
        try {
            const response = await fetch(API_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                    // æ³¨æ„ï¼šè¿™é‡Œä¸éœ€è¦ Authorization Headerï¼Œå¯†ç åœ¨ body é‡Œ
                },
                body: JSON.stringify({
                    token: token,       // ä½ çš„å¯†ç 
                    model: MODEL_ID,    // ä½ çš„æ¨¡å‹ID
                    messages: [
                        { role: "system", content: systemPrompt },
                        { role: "user", content: userContent }
                    ],
                    temperature: 0.7,
                    stream: false
                })
            });

            const data = await response.json();

            // é”™è¯¯å¤„ç†
            if (data.error) {
                throw new Error(data.error.message || "API è¿”å›é”™è¯¯");
            }
            
            // å…¼å®¹æ€§å¤„ç†ï¼šé˜²æ­¢ä»£ç†è¿”å›ç»“æ„ä¸åŒï¼Œä¼˜å…ˆå– standard openai format
            let resultText = "";
            if (data.choices && data.choices[0] && data.choices[0].message) {
                resultText = data.choices[0].message.content;
            } else if (data.result) {
                resultText = data.result; // å¤‡ç”¨å­—æ®µ
            } else {
                resultText = JSON.stringify(data); // å®åœ¨ä¸è¡Œæ‰“å°å…¨éƒ¨
            }

            output.innerText = resultText;

        } catch (err) {
            console.error(err);
            output.innerText = "ğŸ˜­ å“å‘€å‡ºé”™äº†ï¼š\n" + err.message + "\n(å¯èƒ½æ˜¯å¯†ç ä¸å¯¹ï¼Œæˆ–è€…ç½‘ç»œå¡äº†)";
        } finally {
            btn.disabled = false;
            btn.innerHTML = "ğŸª„ é‡æ–°ç”Ÿæˆ";
        }
    }

    function copyText() {
        const text = document.getElementById('output').innerText;
        if(text.includes("ç­‰å¾…ç”Ÿæˆ") || text.includes("å‡ºé”™äº†")) return;
        navigator.clipboard.writeText(text).then(() => alert("å¤åˆ¶æˆåŠŸï¼å¿«å»ç”»å›¾å§~"));
    }

    // --- è¾…åŠ©å‡½æ•°ï¼šåŒè¯­æè¿° (å®Œå…¨ä¿ç•™ä½ çš„åŸè®¾) ---
    function getSubjectDesc(val, lang) {
        if (lang === 'en') {
            if (val === 'coco') return "A cute 2-year-old East Asian girl, round face, big eyes, short hair, adorable expression.";
            if (val === 'girl') return "A beautiful young girl, close-up, natural skin texture, bright eyes.";
            if (val === 'boy') return "A handsome young man, sharp features, deep eyes.";
            if (val === 'cat') return "A fluffy cute cat/dog, innocent eyes, realistic fur.";
            return "A character";
        } else {
            if (val === 'coco') return "1å²10ä¸ªæœˆçš„ä¸œäºšå°å¥³å­©ï¼Œçš®è‚¤ç™½çš™ï¼Œè¡¨æƒ…è¶…çº§èŒã€‚";
            if (val === 'girl') return "ä¸€ä½é’æ˜¥æ´»æ³¼çš„å¯çˆ±å°‘å¥³ï¼Œé¢éƒ¨ç‰¹å†™ï¼Œçš®è‚¤è´¨æ„ŸçœŸå®ç»†è…»ã€‚";
            if (val === 'boy') return "ä¸€ä½è‹±ä¿Šçš„å¹´è½»ç”·å­ï¼Œäº”å®˜ç«‹ä½“ã€‚";
            if (val === 'cat') return "ä¸€åªæ¯›èŒ¸èŒ¸çš„å¯çˆ±å® ç‰©ï¼Œæ¯›å‘çœŸå®ã€‚";
            return "äººç‰©";
        }
    }

    function getStyleDesc(val, lang) {
        if (lang === 'en') {
            if (val === 'real') return "Photorealistic, 8k, raw photo, natural lighting, film grain.";
            if (val === 'pixar') return "Pixar style 3D render, C4D, blind box texture, cute, soft lighting.";
            if (val === 'clay') return "Claymation style, stop motion, rounded edges, vibrant colors.";
            if (val === 'cyberpunk') return "Cyberpunk style, neon lights, high contrast, futuristic.";
            return "High quality";
        } else {
            if (val === 'real') return "çœŸå®å†™çœŸé£æ ¼ï¼Œé«˜æ¸…ï¼Œè‡ªç„¶å…‰ï¼Œèƒ¶ç‰‡æ„Ÿï¼Œä¿ç•™çš®è‚¤çº¹ç†ã€‚";
            if (val === 'pixar') return "çš®å…‹æ–¯3DåŠ¨ç”»é£æ ¼ï¼ŒC4Dæ¸²æŸ“ï¼Œç›²ç›’è´¨æ„Ÿï¼Œå…‰å½±æŸ”å’Œã€‚";
            if (val === 'clay') return "ç²˜åœŸé£ï¼Œå®šæ ¼åŠ¨ç”»è´¨æ„Ÿï¼Œè¾¹ç¼˜åœ†æ¶¦ã€‚";
            if (val === 'cyberpunk') return "èµ›åšæœ‹å…‹é£æ ¼ï¼Œéœ“è™¹ç¯æ•ˆï¼Œæœªæ¥æ„Ÿã€‚";
            return "é«˜æ¸…é£æ ¼";
        }
    }
</script>

</body>
</html>